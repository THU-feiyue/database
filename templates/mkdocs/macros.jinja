{% macro get_applicant_desc(applicant, major, show_term=true) -%}
{% if "姓名/昵称" in applicant %}{{ applicant["姓名/昵称"] }}{% else %}{{ applicant["ID"] }}{% endif %}{% if major %} - {{ major }}{% endif %}{% if show_term and applicant["__term"][0] %} - {{ applicant["__term"][0] }}{{ applicant["__term"][1] }}{% endif %}
{%- endmacro %}

{% macro get_major_desc(major, show_dept=true) -%}
{{ major["专业"] }}{% if show_dept %}（{{ major["院系"] }}）{% endif %}
{%- endmacro %}

{% macro get_program_icon(program) -%}
<small><code>{{ program["类别"] }}</code></small>
{%- endmacro %}

{% macro get_program_desc(program, show_icon=true) -%}
{{ program["学校@项目"] }}{% if show_icon %} {{ get_program_icon(program) }}{% endif %}
{%- endmacro %}

{% macro get_major_link(major, show_dept=true) -%}
[{{ get_major_desc(major, show_dept) }}](../major/{{ major["ID"] }}.md)
{%- endmacro %}

{% macro get_program_link(program, show_icon=true) -%}
[{{ get_program_desc(program, show_icon) }}](../program/{{ program["ID"] }}.md)
{%- endmacro %}

{% macro get_applicant_link(applicant, major, show_term=true) -%}
[{{ get_applicant_desc(applicant, major, show_term) }}](../applicant/{{ applicant["ID"] }}.md)
{%- endmacro %}

{% macro get_datapoint_status(datapoint) -%}
{%- set result = datapoint["结果"] -%}
{%- set admit = result == "Admit" -%}
{%- set reject = result == "Reject" -%}
{%- if datapoint["最终去向"] %}:white_check_mark: Chosen{% else %}{%- if admit %}:green_circle:{% elif reject %}:red_circle:{% else %}:blue_circle:{% endif %} {{ result if result else "Unknown" }}{% endif %}
{%- endmacro %}

{% macro make_metric_card(title, icon) %}
<li style="user-select:none;-webkit-user-select:none;cursor:default;" markdown>
<div style="font-size:1.05em;" markdown>
{{ icon }} {{ title }}
</div>
<div style="text-align:right;" markdown>
<big>
{{ caller() }}
</big>
</div>
</li>
{% endmacro %}

{% macro make_horizontal_lined(leading, trailing) %}
<span class="lined-flex" markdown>
<span markdown>{{ leading }}</span>
<hr/>
<span>{{ trailing }}</span>
</span>
{% endmacro %}